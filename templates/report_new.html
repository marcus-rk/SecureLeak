{#
    New report submission form.
    The reports blueprint renders this template and injects a CSRF token for secure file uploads.
    Form posts to the same endpoint (`reports.new_report`) to handle create requests.
#}
{% extends "layout.html" %}
{% block content %}
    {% set token = csrf_token() %}
    <section class="reports">
        <h2>New Report</h2>
        <form method="post" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" value="{{ token }}">
            <div class="csrf-toggle" data-token-container>
                <button type="button" data-token-toggle>Show CSRF token</button>
                <code data-token-value hidden>{{ token }}</code>
            </div>
            <label for="title">Title</label>
            <input id="title" name="title" required>
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="6" required></textarea>
            <label for="severity">Severity</label>
            <select id="severity" name="severity">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
            <label for="status">Status</label>
            <select id="status" name="status">
                <option value="public">Public</option>
                <option value="private">Private</option>
            </select>
            <label for="attachment">Attachment</label>
            <input id="attachment" name="attachment" type="file" accept="image/*">
            <button type="submit">Submit report</button>
        </form>
    </section>
{% endblock %}
