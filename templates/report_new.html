{#
    New report submission form.
    The reports blueprint renders this template and injects a CSRF token for secure file uploads.
    Form posts to the same endpoint (`reports.new_report`) to handle create requests.
#}
{% extends "layout.html" %}
{% block content %}
    <section class="reports card">
        <h2>New Report</h2>
        <form method="post" enctype="multipart/form-data">
            <input type="hidden"
                   name="csrf_token"
                   value="{{ csrf_token() }}"
                   data-token-input>
            <div class="csrf-toggle" data-token-container>
                <div class="csrf-controls">
                    <label class="switch">
                        <input type="checkbox" data-token-visibility-toggle>
                        <span class="switch-ui" aria-hidden="true"></span>
                        <span class="switch-label">Show token value (for learning)</span>
                    </label>
                    <label class="switch">
                        <input type="checkbox" data-token-include-toggle checked>
                        <span class="switch-ui" aria-hidden="true"></span>
                        <span class="switch-label">Include CSRF token in this request</span>
                    </label>
                </div>
                <code data-token-value hidden>{{ csrf_token() }}</code>
            </div>
            <label for="title">Title</label>
            <input id="title" name="title" required>
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="6" required></textarea>
            <label for="severity">Severity</label>
            <select id="severity" name="severity">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
            <label for="status">Status</label>
            <select id="status" name="status">
                <option value="public">Public</option>
                <option value="private">Private</option>
            </select>
            <label for="image">Attachment (optional)</label>
            <input id="image" name="image" type="file" accept="image/*">
            <div class="actions actions--end">
                <button type="submit">Submit report</button>
            </div>
        </form>
    </section>
{% endblock %}
